!function(){"use strict";class t{constructor(t){let{popupSelector:e}=t;this._popupElement=document.querySelector(e),this._handleEscClose=this._handleEscClose.bind(this),this._handleClickClose=this._handleClickClose.bind(this)}open(){this._popupElement.classList.add("modal_opened"),this.setEventListeners()}close(){this._popupElement.classList.remove("modal_opened"),document.removeEventListener("keydown",this._handleEscClose),this._popupElement.removeEventListener("click",this._handleClickClose)}_handleEscClose(t){"Escape"===t.key&&this.close()}_handleClickClose(t){(t.target.classList.contains("modal")||t.target.classList.contains("modal__button-exit"))&&this.close()}setEventListeners(){document.addEventListener("keydown",this._handleEscClose),this._popupElement.addEventListener("click",this._handleClickClose)}}class e extends t{constructor(t,e){super({popupSelector:t}),this._popupForm=this._popupElement.querySelector(".modal__form"),this._handleFormSubmit=e,this._inputs=this._popupForm.querySelectorAll(".form__input")}_getInputValues(){const t={};return this._inputs.forEach((e=>{t[e.name]=e.value})),t}_submitForm=()=>{const t=this._getInputValues();this._handleFormSubmit(t)};setEventListeners(){super.setEventListeners(),this._popupForm.addEventListener("submit",this._submitForm)}close(){this._popupForm.reset(),super.close(),this._popupForm.removeEventListener("submit",this._submitForm)}}const s=document.querySelector("#profile-edit-button"),i=document.querySelector("#form-input-name"),n=document.querySelector("#form-input-description"),r=document.querySelector("#card-add-button"),o={};var l;l={formSelector:".form",inputSelector:".form__input",submitButtonSelector:".form__button",inactiveButtonClass:"form__button_disabled",inputErrorClass:"form__input_type_error",errorClass:"form__error_visible"},Array.from(document.querySelectorAll(l.formSelector)).forEach((t=>{const e=new class{constructor(t,e){this._inputSelector=t.inputSelector,this._submitButtonSelector=t.submitButtonSelector,this._inactiveButtonClass=t.inactiveButtonClass,this._inputErrorClass=t.inputErrorClass,this._errorClass=t.errorClass,this._form=e}_showInputError(t){const e=this._form.querySelector(`#${t.id}-error`);t.classList.add(this._inputErrorClass),e.textContent=t.validationMessage,e.classList.add(this._errorClass)}_hideInputError(t){const e=this._form.querySelector(`#${t.id}-error`);t.classList.remove(this._inputErrorClass),e.textContent="",e.classList.remove(this._errorClass)}resetValidation(){this._toggleButtonState(),this._inputElements.forEach((t=>{this._hideInputError(t)}))}_toggleButtonState(){this._hasInvalidInput()?this._disableButton():(this._buttonElement.classList.remove(this._inactiveButtonClass),this._buttonElement.disabled=!1)}_hasInvalidInput(){return this._inputElements.some((t=>!t.validity.valid))}_checkInputValidity(t){t.validity.valid?this._hideInputError(t):this._showInputError(t)}_disableButton(){this._buttonElement.classList.add(this._inactiveButtonClass),this._buttonElement.disabled=!0}_setEventListeners(){this._inputElements=[...this._form.querySelectorAll(this._inputSelector)],this._buttonElement=this._form.querySelector(this._submitButtonSelector),this._inputElements.forEach((t=>{t.addEventListener("input",(()=>{this._checkInputValidity(t),this._toggleButtonState()}))})),this._toggleButtonState()}enableValidation(){this._form.addEventListener("submit",(t=>{t.preventDefault()})),this._setEventListeners()}}(l,t),s=t.getAttribute("name");o[s]=e,e.enableValidation()}));const a=new class extends t{constructor(t){super({popupSelector:t}),this._previewImage=document.querySelector(".modal__image"),this._previewCaption=document.querySelector(".modal__preview-caption")}open(t,e){this._previewImage.src=e,this._previewCaption.textContent=t,this._previewImage.alt=`Photo of ${t}`,super.open()}}("#modal-preview-image"),c=new e("#modal-add-card",(function(t){const{name:e,link:s}=t,i=m({name:e,link:s});_.prependItem(i),c.close()})),d=new e("#modal-profile-edit",(function(t){const{name:e,description:s}=t;u.setUserInfo(e,s),d.close()})),u=new class{constructor(t,e){this._nameElement=t,this._descripElement=e}getUserInfo(){const t={};return t.profileName=this._nameElement.textContent,t.description=this._descripElement.textContent,t}setUserInfo(t,e){this._nameElement.textContent=t,this._descripElement.textContent=e}}(document.querySelector(".profile__name"),document.querySelector(".profile__subtitle"));function h(t){let{name:e,link:s}=t;a.open(e,s)}function m(t){return new class{constructor(t,e,s){this._name=t.name,this._link=t.link,this._cardSelector=e,this._handleCardClick=s}_setEventListeners(){this._cardImage.addEventListener("click",(()=>{this._handleCardClick({name:this._name,link:this._link})})),this._likeButton.addEventListener("click",(()=>this._handleLikeButton())),this._deleteButton.addEventListener("click",(()=>this._handleDeleteButton()))}_handleLikeButton(){this._likeButton.classList.toggle("card__like-button_active")}_handleDeleteButton(){this._cardElement.remove()}_getTemplate(){return this._cardElement=document.querySelector(this._cardSelector).content.querySelector(".card").cloneNode(!0),this._cardElement}getView(){return this._cardElement=this._getTemplate(),this._cardImage=this._cardElement.querySelector(".card__image"),this._cardTitle=this._cardElement.querySelector(".card__title"),this._likeButton=this._cardElement.querySelector(".card__like-button"),this._deleteButton=this._cardElement.querySelector(".card__delete-button"),this._cardImage.src=this._link,this._cardTitle.textContent=this._name,this._cardImage.alt=`Photo of ${this._name}`,this._setEventListeners(),this._cardElement}}(t,"#card-template",h).getView()}const _=new class{constructor(t,e){let{items:s,renderer:i}=t;this._renderedItems=s,this._renderer=i,this._container=document.querySelector(e)}renderItems(){this._renderedItems.forEach((t=>{this._renderer(t)}))}addItem(t){this._container.append(t)}prependItem(t){this._container.prepend(t)}}({items:[{name:"Alaverdi, Armenia",link:"https://images.unsplash.com/photo-1543862475-eb136770ae9b?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=870&q=80"},{name:"Angkor Wat, Cambodia",link:"https://images.unsplash.com/photo-1600807455249-89d2e285b9e0?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=687&q=80"},{name:"Arches National Park, USA",link:"https://images.unsplash.com/photo-1527333656061-ca7adf608ae1?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1374&q=80"},{name:"Redwood National Park, USA",link:"https://images.unsplash.com/photo-1547014762-3a94fb4df70a?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=686&q=80"},{name:"Mount Fuji, Japan",link:"https://images.unsplash.com/photo-1490806843957-31f4c9a91c65?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1740&q=80"},{name:"Deadvlei, Namibia",link:"https://images.unsplash.com/photo-1448831338187-78296e6fdc4d?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1738&q=80"}],renderer:t=>{const e=m(t);_.addItem(e)}},".gallery__list");_.renderItems(),s.addEventListener("click",(()=>{const{profileName:t,description:e}=u.getUserInfo();i.value=t,n.value=e,d.open(),o["profile-form"].resetValidation()})),r.addEventListener("click",(()=>{c.open(),o["card-form"].resetValidation()}))}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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TixNQUFROEQsRUFDekJGLEVBQWlCcEYsT0FDakJnQyxFQUFlLGdCQUFnQnlCLGlCQUFpQixJQUdsRDFCLEVBQWNwQixpQkFBaUIsU0FBUyxLQUN0Q29FLEVBQWEvRSxPQUNiZ0MsRUFBZSxhQUFheUIsaUJBQWlCLEciLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9Qb3B1cC5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy91dGlscy9jb25zdGFudHMuanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL3BhZ2VzL2luZGV4LmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL0Zvcm12YWxpZGF0b3IuanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvVXNlcmluZm8uanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvQ2FyZC5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9TZWN0aW9uLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwIHtcbiAgY29uc3RydWN0b3IoeyBwb3B1cFNlbGVjdG9yIH0pIHtcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHBvcHVwU2VsZWN0b3IpO1xuICAgIHRoaXMuX2hhbmRsZUVzY0Nsb3NlID0gdGhpcy5faGFuZGxlRXNjQ2xvc2UuYmluZCh0aGlzKTtcbiAgICB0aGlzLl9oYW5kbGVDbGlja0Nsb3NlID0gdGhpcy5faGFuZGxlQ2xpY2tDbG9zZS5iaW5kKHRoaXMpO1xuICB9XG5cbiAgb3BlbigpIHtcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuY2xhc3NMaXN0LmFkZChcIm1vZGFsX29wZW5lZFwiKTtcbiAgICB0aGlzLnNldEV2ZW50TGlzdGVuZXJzKCk7XG4gIH1cblxuICBjbG9zZSgpIHtcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShcIm1vZGFsX29wZW5lZFwiKTtcbiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCB0aGlzLl9oYW5kbGVDbGlja0Nsb3NlKTtcbiAgfVxuXG4gIF9oYW5kbGVFc2NDbG9zZShldnQpIHtcbiAgICAvLyBjbG9zZXMgcG9wdXAgb24gJ2VzY2FwZScga2V5XG4gICAgaWYgKGV2dC5rZXkgPT09IFwiRXNjYXBlXCIpIHtcbiAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICB9XG4gIH1cblxuICBfaGFuZGxlQ2xpY2tDbG9zZShldnQpIHtcbiAgICAvLyBjbG9zZXMgcG9wdXAgb24gJ2V4aXQgYnV0dG9uJyBjbGljaywgb3IgY2xpY2tpbmcgb3V0c2lkZSBvZiBtb2RhbFxuICAgIGlmIChcbiAgICAgIGV2dC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFwibW9kYWxcIikgfHxcbiAgICAgIGV2dC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFwibW9kYWxfX2J1dHRvbi1leGl0XCIpXG4gICAgKSB7XG4gICAgICB0aGlzLmNsb3NlKCk7XG4gICAgfVxuICB9XG5cbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xuICAgIHRoaXMuX3BvcHVwRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgdGhpcy5faGFuZGxlQ2xpY2tDbG9zZSk7XG4gIH1cbn1cbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhGb3JtIGV4dGVuZHMgUG9wdXAge1xuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yLCBoYW5kbGVGb3JtU3VibWl0KSB7XG4gICAgc3VwZXIoeyBwb3B1cFNlbGVjdG9yIH0pO1xuICAgIHRoaXMuX3BvcHVwRm9ybSA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19mb3JtXCIpO1xuICAgIHRoaXMuX2hhbmRsZUZvcm1TdWJtaXQgPSBoYW5kbGVGb3JtU3VibWl0O1xuICAgIHRoaXMuX2lucHV0cyA9IHRoaXMuX3BvcHVwRm9ybS5xdWVyeVNlbGVjdG9yQWxsKFwiLmZvcm1fX2lucHV0XCIpO1xuICB9XG5cbiAgX2dldElucHV0VmFsdWVzKCkge1xuICAgIGNvbnN0IGlucHV0c09iaiA9IHt9O1xuICAgIHRoaXMuX2lucHV0cy5mb3JFYWNoKChpbnB1dCkgPT4ge1xuICAgICAgaW5wdXRzT2JqW2lucHV0Lm5hbWVdID0gaW5wdXQudmFsdWU7XG4gICAgfSk7XG5cbiAgICByZXR1cm4gaW5wdXRzT2JqO1xuICB9XG5cbiAgX3N1Ym1pdEZvcm0gPSAoKSA9PiB7XG4gICAgY29uc3QgaW5wdXRWYWx1ZXMgPSB0aGlzLl9nZXRJbnB1dFZhbHVlcygpO1xuICAgIHRoaXMuX2hhbmRsZUZvcm1TdWJtaXQoaW5wdXRWYWx1ZXMpO1xuICB9O1xuXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XG4gICAgdGhpcy5fcG9wdXBGb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgdGhpcy5fc3VibWl0Rm9ybSk7XG4gIH1cblxuICBjbG9zZSgpIHtcbiAgICB0aGlzLl9wb3B1cEZvcm0ucmVzZXQoKTtcbiAgICBzdXBlci5jbG9zZSgpO1xuICAgIHRoaXMuX3BvcHVwRm9ybS5yZW1vdmVFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIHRoaXMuX3N1Ym1pdEZvcm0pO1xuICB9XG59XG4iLCJleHBvcnQgY29uc3QgaW5pdGlhbENhcmRzID0gW1xuICB7XG4gICAgbmFtZTogXCJBbGF2ZXJkaSwgQXJtZW5pYVwiLFxuICAgIGxpbms6IFwiaHR0cHM6Ly9pbWFnZXMudW5zcGxhc2guY29tL3Bob3RvLTE1NDM4NjI0NzUtZWIxMzY3NzBhZTliP2l4bGliPXJiLTQuMC4zJml4aWQ9TW53eE1qQTNmREI4TUh4d2FHOTBieTF3WVdkbGZIeDhmR1Z1ZkRCOGZIeDgmYXV0bz1mb3JtYXQmZml0PWNyb3Amdz04NzAmcT04MFwiLFxuICB9LFxuICB7XG4gICAgbmFtZTogXCJBbmdrb3IgV2F0LCBDYW1ib2RpYVwiLFxuICAgIGxpbms6IFwiaHR0cHM6Ly9pbWFnZXMudW5zcGxhc2guY29tL3Bob3RvLTE2MDA4MDc0NTUyNDktODlkMmUyODViOWUwP2l4bGliPXJiLTQuMC4zJml4aWQ9TW53eE1qQTNmREI4TUh4d2FHOTBieTF3WVdkbGZIeDhmR1Z1ZkRCOGZIeDgmYXV0bz1mb3JtYXQmZml0PWNyb3Amdz02ODcmcT04MFwiLFxuICB9LFxuICB7XG4gICAgbmFtZTogXCJBcmNoZXMgTmF0aW9uYWwgUGFyaywgVVNBXCIsXG4gICAgbGluazogXCJodHRwczovL2ltYWdlcy51bnNwbGFzaC5jb20vcGhvdG8tMTUyNzMzMzY1NjA2MS1jYTdhZGY2MDhhZTE/aXhsaWI9cmItNC4wLjMmaXhpZD1Nbnd4TWpBM2ZEQjhNSHh3YUc5MGJ5MXdZV2RsZkh4OGZHVnVmREI4Zkh4OCZhdXRvPWZvcm1hdCZmaXQ9Y3JvcCZ3PTEzNzQmcT04MFwiLFxuICB9LFxuICB7XG4gICAgbmFtZTogXCJSZWR3b29kIE5hdGlvbmFsIFBhcmssIFVTQVwiLFxuICAgIGxpbms6IFwiaHR0cHM6Ly9pbWFnZXMudW5zcGxhc2guY29tL3Bob3RvLTE1NDcwMTQ3NjItM2E5NGZiNGRmNzBhP2l4bGliPXJiLTQuMC4zJml4aWQ9TW53eE1qQTNmREI4TUh4d2FHOTBieTF3WVdkbGZIeDhmR1Z1ZkRCOGZIeDgmYXV0bz1mb3JtYXQmZml0PWNyb3Amdz02ODYmcT04MFwiLFxuICB9LFxuICB7XG4gICAgbmFtZTogXCJNb3VudCBGdWppLCBKYXBhblwiLFxuICAgIGxpbms6IFwiaHR0cHM6Ly9pbWFnZXMudW5zcGxhc2guY29tL3Bob3RvLTE0OTA4MDY4NDM5NTctMzFmNGM5YTkxYzY1P2l4bGliPXJiLTQuMC4zJml4aWQ9TW53eE1qQTNmREI4TUh4d2FHOTBieTF3WVdkbGZIeDhmR1Z1ZkRCOGZIeDgmYXV0bz1mb3JtYXQmZml0PWNyb3Amdz0xNzQwJnE9ODBcIixcbiAgfSxcbiAge1xuICAgIG5hbWU6IFwiRGVhZHZsZWksIE5hbWliaWFcIixcbiAgICBsaW5rOiBcImh0dHBzOi8vaW1hZ2VzLnVuc3BsYXNoLmNvbS9waG90by0xNDQ4ODMxMzM4MTg3LTc4Mjk2ZTZmZGM0ZD9peGxpYj1yYi00LjAuMyZpeGlkPU1ud3hNakEzZkRCOE1IeHdhRzkwYnkxd1lXZGxmSHg4ZkdWdWZEQjhmSHg4JmF1dG89Zm9ybWF0JmZpdD1jcm9wJnc9MTczOCZxPTgwXCIsXG4gIH0sXG5dO1xuXG5leHBvcnQgY29uc3QgY29uZmlnID0ge1xuICBmb3JtU2VsZWN0b3I6IFwiLmZvcm1cIixcbiAgaW5wdXRTZWxlY3RvcjogXCIuZm9ybV9faW5wdXRcIixcbiAgc3VibWl0QnV0dG9uU2VsZWN0b3I6IFwiLmZvcm1fX2J1dHRvblwiLFxuICBpbmFjdGl2ZUJ1dHRvbkNsYXNzOiBcImZvcm1fX2J1dHRvbl9kaXNhYmxlZFwiLFxuICBpbnB1dEVycm9yQ2xhc3M6IFwiZm9ybV9faW5wdXRfdHlwZV9lcnJvclwiLFxuICBlcnJvckNsYXNzOiBcImZvcm1fX2Vycm9yX3Zpc2libGVcIixcbn07XG4iLCJpbXBvcnQgXCIuL2luZGV4LmNzc1wiO1xuaW1wb3J0IEZvcm1WYWxpZGF0b3IgZnJvbSBcIi4uL2NvbXBvbmVudHMvRm9ybXZhbGlkYXRvci5qc1wiO1xuaW1wb3J0IENhcmQgZnJvbSBcIi4uL2NvbXBvbmVudHMvQ2FyZC5qc1wiO1xuaW1wb3J0IFNlY3Rpb24gZnJvbSBcIi4uL2NvbXBvbmVudHMvU2VjdGlvbi5qc1wiO1xuaW1wb3J0IFBvcHVwV2l0aEZvcm0gZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qc1wiO1xuaW1wb3J0IFBvcHVwV2l0aEltYWdlIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzXCI7XG5pbXBvcnQgVXNlckluZm8gZnJvbSBcIi4uL2NvbXBvbmVudHMvVXNlcmluZm8uanNcIjtcbmltcG9ydCB7IGluaXRpYWxDYXJkcyB9IGZyb20gXCIuLi91dGlscy9jb25zdGFudHMuanNcIjtcbmltcG9ydCB7IGNvbmZpZyB9IGZyb20gXCIuLi91dGlscy9jb25zdGFudHMuanNcIjtcblxuLy8gTU9EQUwgRUxFTUVOVFNcblxuY29uc3QgcHJvZmlsZUVkaXRCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Byb2ZpbGUtZWRpdC1idXR0b25cIik7XG5jb25zdCBpbnB1dE5hbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2Zvcm0taW5wdXQtbmFtZVwiKTtcbmNvbnN0IGlucHV0RGVzY3JpcHRpb24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2Zvcm0taW5wdXQtZGVzY3JpcHRpb25cIik7XG5jb25zdCBjYXJkQWRkQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNjYXJkLWFkZC1idXR0b25cIik7XG5cbi8vIFZBTElEQVRJT05cblxuY29uc3QgZm9ybVZhbGlkYXRvcnMgPSB7fTtcblxuY29uc3QgZW5hYmxlVmFsaWRhdGlvbiA9IChjb25maWcpID0+IHtcbiAgY29uc3QgZm9ybUxpc3QgPSBBcnJheS5mcm9tKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoY29uZmlnLmZvcm1TZWxlY3RvcikpO1xuICBmb3JtTGlzdC5mb3JFYWNoKChmb3JtRWxlbWVudCkgPT4ge1xuICAgIGNvbnN0IHZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKGNvbmZpZywgZm9ybUVsZW1lbnQpO1xuICAgIGNvbnN0IGZvcm1OYW1lID0gZm9ybUVsZW1lbnQuZ2V0QXR0cmlidXRlKFwibmFtZVwiKTtcbiAgICBmb3JtVmFsaWRhdG9yc1tmb3JtTmFtZV0gPSB2YWxpZGF0b3I7XG4gICAgdmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcbiAgfSk7XG59O1xuXG5lbmFibGVWYWxpZGF0aW9uKGNvbmZpZyk7XG5cbi8vIFBPUFVQIEVMRU1FTlRTXG5cbmNvbnN0IGltYWdlUHJldmlld1BvcHVwID0gbmV3IFBvcHVwV2l0aEltYWdlKFwiI21vZGFsLXByZXZpZXctaW1hZ2VcIik7XG5cbmNvbnN0IGFkZENhcmRQb3B1cCA9IG5ldyBQb3B1cFdpdGhGb3JtKFwiI21vZGFsLWFkZC1jYXJkXCIsIGhhbmRsZUNhcmRGb3JtU3VibWl0KTtcblxuY29uc3QgZWRpdFByb2ZpbGVQb3B1cCA9IG5ldyBQb3B1cFdpdGhGb3JtKFxuICBcIiNtb2RhbC1wcm9maWxlLWVkaXRcIixcbiAgaGFuZGxlUHJvZmlsZUZvcm1TdWJtaXRcbik7XG5cbmNvbnN0IHVzZXJJbmZvID0gbmV3IFVzZXJJbmZvKFxuICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX25hbWVcIiksXG4gIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fc3VidGl0bGVcIilcbik7XG5cbi8vIFJFTkRFUiBDQVJEIEZVTkNUSU9OU1xuXG5mdW5jdGlvbiBoYW5kbGVDYXJkQ2xpY2soeyBuYW1lLCBsaW5rIH0pIHtcbiAgaW1hZ2VQcmV2aWV3UG9wdXAub3BlbihuYW1lLCBsaW5rKTtcbn1cblxuZnVuY3Rpb24gcmVuZGVyQ2FyZChjYXJkRGF0YSkge1xuICBjb25zdCBjYXJkRWxlbWVudCA9IG5ldyBDYXJkKGNhcmREYXRhLCBcIiNjYXJkLXRlbXBsYXRlXCIsIGhhbmRsZUNhcmRDbGljayk7XG4gIHJldHVybiBjYXJkRWxlbWVudC5nZXRWaWV3KCk7XG59XG5cbi8vIFJFTkRFUiBJTklUQUwgQ0FSRFNcblxuY29uc3QgY2FyZFNlY3Rpb24gPSBuZXcgU2VjdGlvbihcbiAge1xuICAgIGl0ZW1zOiBpbml0aWFsQ2FyZHMsXG4gICAgcmVuZGVyZXI6IChjYXJkRGF0YSkgPT4ge1xuICAgICAgY29uc3QgY2FyZEVsZW1lbnQgPSByZW5kZXJDYXJkKGNhcmREYXRhKTtcbiAgICAgIGNhcmRTZWN0aW9uLmFkZEl0ZW0oY2FyZEVsZW1lbnQpO1xuICAgIH0sXG4gIH0sXG4gIFwiLmdhbGxlcnlfX2xpc3RcIlxuKTtcblxuY2FyZFNlY3Rpb24ucmVuZGVySXRlbXMoKTtcblxuLy8gRVZFTlQgSEFORExFUlMgLSBmb3Igc3VibWl0dGluZyBlZGl0IHByb2ZpbGUgZm9ybSBhbmQgYWRkIGNhcmQgZm9ybVxuXG5mdW5jdGlvbiBoYW5kbGVQcm9maWxlRm9ybVN1Ym1pdChmb3JtRGF0YSkge1xuICBjb25zdCB7IG5hbWUsIGRlc2NyaXB0aW9uIH0gPSBmb3JtRGF0YTtcbiAgdXNlckluZm8uc2V0VXNlckluZm8obmFtZSwgZGVzY3JpcHRpb24pO1xuICBlZGl0UHJvZmlsZVBvcHVwLmNsb3NlKCk7XG59XG5cbmZ1bmN0aW9uIGhhbmRsZUNhcmRGb3JtU3VibWl0KGlucHV0VmFsdWVzKSB7XG4gIGNvbnN0IHsgbmFtZSwgbGluayB9ID0gaW5wdXRWYWx1ZXM7XG4gIGNvbnN0IGNhcmRFbGVtZW50ID0gcmVuZGVyQ2FyZCh7IG5hbWUsIGxpbmsgfSk7XG4gIGNhcmRTZWN0aW9uLnByZXBlbmRJdGVtKGNhcmRFbGVtZW50KTtcbiAgYWRkQ2FyZFBvcHVwLmNsb3NlKCk7XG59XG5cbi8vIEVWRU5UIExJU1RFTkVSU1xuXG5wcm9maWxlRWRpdEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICBjb25zdCB7IHByb2ZpbGVOYW1lLCBkZXNjcmlwdGlvbiB9ID0gdXNlckluZm8uZ2V0VXNlckluZm8oKTtcbiAgaW5wdXROYW1lLnZhbHVlID0gcHJvZmlsZU5hbWU7XG4gIGlucHV0RGVzY3JpcHRpb24udmFsdWUgPSBkZXNjcmlwdGlvbjtcbiAgZWRpdFByb2ZpbGVQb3B1cC5vcGVuKCk7XG4gIGZvcm1WYWxpZGF0b3JzW1wicHJvZmlsZS1mb3JtXCJdLnJlc2V0VmFsaWRhdGlvbigpO1xufSk7XG5cbmNhcmRBZGRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgYWRkQ2FyZFBvcHVwLm9wZW4oKTtcbiAgZm9ybVZhbGlkYXRvcnNbXCJjYXJkLWZvcm1cIl0ucmVzZXRWYWxpZGF0aW9uKCk7XG59KTtcbiIsImNsYXNzIEZvcm1WYWxpZGF0b3Ige1xuICBjb25zdHJ1Y3Rvcihjb25maWcsIGZvcm1FbGVtZW50KSB7XG4gICAgdGhpcy5faW5wdXRTZWxlY3RvciA9IGNvbmZpZy5pbnB1dFNlbGVjdG9yO1xuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvblNlbGVjdG9yID0gY29uZmlnLnN1Ym1pdEJ1dHRvblNlbGVjdG9yO1xuICAgIHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MgPSBjb25maWcuaW5hY3RpdmVCdXR0b25DbGFzcztcbiAgICB0aGlzLl9pbnB1dEVycm9yQ2xhc3MgPSBjb25maWcuaW5wdXRFcnJvckNsYXNzO1xuICAgIHRoaXMuX2Vycm9yQ2xhc3MgPSBjb25maWcuZXJyb3JDbGFzcztcbiAgICB0aGlzLl9mb3JtID0gZm9ybUVsZW1lbnQ7XG4gIH1cblxuICBfc2hvd0lucHV0RXJyb3IoaW5wdXRFbGVtZW50KSB7XG4gICAgY29uc3QgZXJyb3JNZXNzYWdlRWxlbSA9IHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvcihcbiAgICAgIGAjJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYFxuICAgICk7XG4gICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5faW5wdXRFcnJvckNsYXNzKTtcbiAgICBlcnJvck1lc3NhZ2VFbGVtLnRleHRDb250ZW50ID0gaW5wdXRFbGVtZW50LnZhbGlkYXRpb25NZXNzYWdlO1xuICAgIGVycm9yTWVzc2FnZUVsZW0uY2xhc3NMaXN0LmFkZCh0aGlzLl9lcnJvckNsYXNzKTtcbiAgfVxuXG4gIF9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpIHtcbiAgICBjb25zdCBlcnJvck1lc3NhZ2VFbGVtID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yKFxuICAgICAgYCMke2lucHV0RWxlbWVudC5pZH0tZXJyb3JgXG4gICAgKTtcbiAgICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pbnB1dEVycm9yQ2xhc3MpO1xuICAgIGVycm9yTWVzc2FnZUVsZW0udGV4dENvbnRlbnQgPSBcIlwiO1xuICAgIGVycm9yTWVzc2FnZUVsZW0uY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9lcnJvckNsYXNzKTtcbiAgfVxuXG4gIHJlc2V0VmFsaWRhdGlvbigpIHtcbiAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZSgpO1xuICAgIHRoaXMuX2lucHV0RWxlbWVudHMuZm9yRWFjaCgoaW5wdXRFbGVtZW50KSA9PiB7XG4gICAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpO1xuICAgIH0pO1xuICB9XG5cbiAgX3RvZ2dsZUJ1dHRvblN0YXRlKCkge1xuICAgIGlmICh0aGlzLl9oYXNJbnZhbGlkSW5wdXQoKSkge1xuICAgICAgdGhpcy5fZGlzYWJsZUJ1dHRvbigpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9idXR0b25FbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyk7XG4gICAgICB0aGlzLl9idXR0b25FbGVtZW50LmRpc2FibGVkID0gZmFsc2U7XG4gICAgfVxuICB9XG5cbiAgX2hhc0ludmFsaWRJbnB1dCgpIHtcbiAgICByZXR1cm4gdGhpcy5faW5wdXRFbGVtZW50cy5zb21lKChpbnB1dEVsZW1lbnQpID0+IHtcbiAgICAgIHJldHVybiAhaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkO1xuICAgIH0pO1xuICB9XG5cbiAgX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEVsZW1lbnQpIHtcbiAgICBpZiAoIWlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZCkge1xuICAgICAgdGhpcy5fc2hvd0lucHV0RXJyb3IoaW5wdXRFbGVtZW50KTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5faGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KTtcbiAgICB9XG4gIH1cblxuICBfZGlzYWJsZUJ1dHRvbigpIHtcbiAgICB0aGlzLl9idXR0b25FbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyk7XG4gICAgdGhpcy5fYnV0dG9uRWxlbWVudC5kaXNhYmxlZCA9IHRydWU7XG4gIH1cblxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgdGhpcy5faW5wdXRFbGVtZW50cyA9IFsuLi50aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy5faW5wdXRTZWxlY3RvcildO1xuICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQgPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3IodGhpcy5fc3VibWl0QnV0dG9uU2VsZWN0b3IpO1xuXG4gICAgdGhpcy5faW5wdXRFbGVtZW50cy5mb3JFYWNoKChpbnB1dEVsZW1lbnQpID0+IHtcbiAgICAgIGlucHV0RWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiaW5wdXRcIiwgKCkgPT4ge1xuICAgICAgICB0aGlzLl9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXRFbGVtZW50KTtcbiAgICAgICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKCk7XG4gIH1cblxuICBlbmFibGVWYWxpZGF0aW9uKCkge1xuICAgIHRoaXMuX2Zvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZXZ0KSA9PiB7XG4gICAgICBldnQucHJldmVudERlZmF1bHQoKTtcbiAgICB9KTtcbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IEZvcm1WYWxpZGF0b3I7XG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoSW1hZ2UgZXh0ZW5kcyBQb3B1cCB7XG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcbiAgICBzdXBlcih7IHBvcHVwU2VsZWN0b3IgfSk7XG4gICAgdGhpcy5fcHJldmlld0ltYWdlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9faW1hZ2VcIik7XG4gICAgdGhpcy5fcHJldmlld0NhcHRpb24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19wcmV2aWV3LWNhcHRpb25cIik7XG4gIH1cblxuICBvcGVuKG5hbWUsIGxpbmspIHtcbiAgICB0aGlzLl9wcmV2aWV3SW1hZ2Uuc3JjID0gbGluaztcbiAgICB0aGlzLl9wcmV2aWV3Q2FwdGlvbi50ZXh0Q29udGVudCA9IG5hbWU7XG4gICAgdGhpcy5fcHJldmlld0ltYWdlLmFsdCA9IGBQaG90byBvZiAke25hbWV9YDtcbiAgICBzdXBlci5vcGVuKCk7XG4gIH1cbn1cbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFVzZXJJbmZvIHtcbiAgY29uc3RydWN0b3IobmFtZSwgZGVzY3JpcHRpb24pIHtcbiAgICB0aGlzLl9uYW1lRWxlbWVudCA9IG5hbWU7XG4gICAgdGhpcy5fZGVzY3JpcEVsZW1lbnQgPSBkZXNjcmlwdGlvbjtcbiAgfVxuXG4gIGdldFVzZXJJbmZvKCkge1xuICAgIGNvbnN0IHByb2ZpbGVPYmplY3QgPSB7fTtcbiAgICBwcm9maWxlT2JqZWN0W1wicHJvZmlsZU5hbWVcIl0gPSB0aGlzLl9uYW1lRWxlbWVudC50ZXh0Q29udGVudDtcbiAgICBwcm9maWxlT2JqZWN0W1wiZGVzY3JpcHRpb25cIl0gPSB0aGlzLl9kZXNjcmlwRWxlbWVudC50ZXh0Q29udGVudDtcbiAgICByZXR1cm4gcHJvZmlsZU9iamVjdDtcbiAgfVxuXG4gIHNldFVzZXJJbmZvKG5hbWUsIGRlc2NyaXB0aW9uKSB7XG4gICAgdGhpcy5fbmFtZUVsZW1lbnQudGV4dENvbnRlbnQgPSBuYW1lO1xuICAgIHRoaXMuX2Rlc2NyaXBFbGVtZW50LnRleHRDb250ZW50ID0gZGVzY3JpcHRpb247XG4gIH1cbn1cbiIsImNsYXNzIENhcmQge1xuICBjb25zdHJ1Y3RvcihjYXJkRGF0YSwgY2FyZFNlbGVjdG9yLCBoYW5kbGVDYXJkQ2xpY2spIHtcbiAgICB0aGlzLl9uYW1lID0gY2FyZERhdGEubmFtZTtcbiAgICB0aGlzLl9saW5rID0gY2FyZERhdGEubGluaztcblxuICAgIHRoaXMuX2NhcmRTZWxlY3RvciA9IGNhcmRTZWxlY3RvcjtcbiAgICB0aGlzLl9oYW5kbGVDYXJkQ2xpY2sgPSBoYW5kbGVDYXJkQ2xpY2s7XG4gIH1cblxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgdGhpcy5fY2FyZEltYWdlLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICB0aGlzLl9oYW5kbGVDYXJkQ2xpY2soeyBuYW1lOiB0aGlzLl9uYW1lLCBsaW5rOiB0aGlzLl9saW5rIH0pO1xuICAgIH0pO1xuICAgIHRoaXMuX2xpa2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHRoaXMuX2hhbmRsZUxpa2VCdXR0b24oKSk7XG4gICAgdGhpcy5fZGVsZXRlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PlxuICAgICAgdGhpcy5faGFuZGxlRGVsZXRlQnV0dG9uKClcbiAgICApO1xuICB9XG5cbiAgX2hhbmRsZUxpa2VCdXR0b24oKSB7XG4gICAgdGhpcy5fbGlrZUJ1dHRvbi5jbGFzc0xpc3QudG9nZ2xlKFwiY2FyZF9fbGlrZS1idXR0b25fYWN0aXZlXCIpO1xuICB9XG5cbiAgX2hhbmRsZURlbGV0ZUJ1dHRvbigpIHtcbiAgICB0aGlzLl9jYXJkRWxlbWVudC5yZW1vdmUoKTtcbiAgfVxuXG4gIF9nZXRUZW1wbGF0ZSgpIHtcbiAgICB0aGlzLl9jYXJkRWxlbWVudCA9IGRvY3VtZW50XG4gICAgICAucXVlcnlTZWxlY3Rvcih0aGlzLl9jYXJkU2VsZWN0b3IpXG4gICAgICAuY29udGVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRcIilcbiAgICAgIC5jbG9uZU5vZGUodHJ1ZSk7XG4gICAgcmV0dXJuIHRoaXMuX2NhcmRFbGVtZW50O1xuICB9XG5cbiAgZ2V0VmlldygpIHtcbiAgICB0aGlzLl9jYXJkRWxlbWVudCA9IHRoaXMuX2dldFRlbXBsYXRlKCk7XG4gICAgdGhpcy5fY2FyZEltYWdlID0gdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19pbWFnZVwiKTtcbiAgICB0aGlzLl9jYXJkVGl0bGUgPSB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX3RpdGxlXCIpO1xuICAgIHRoaXMuX2xpa2VCdXR0b24gPSB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2xpa2UtYnV0dG9uXCIpO1xuICAgIHRoaXMuX2RlbGV0ZUJ1dHRvbiA9IHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gICAgICBcIi5jYXJkX19kZWxldGUtYnV0dG9uXCJcbiAgICApO1xuICAgIHRoaXMuX2NhcmRJbWFnZS5zcmMgPSB0aGlzLl9saW5rO1xuICAgIHRoaXMuX2NhcmRUaXRsZS50ZXh0Q29udGVudCA9IHRoaXMuX25hbWU7XG4gICAgdGhpcy5fY2FyZEltYWdlLmFsdCA9IGBQaG90byBvZiAke3RoaXMuX25hbWV9YDtcbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xuICAgIHJldHVybiB0aGlzLl9jYXJkRWxlbWVudDtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBDYXJkO1xuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgU2VjdGlvbiB7XG4gIGNvbnN0cnVjdG9yKHsgaXRlbXMsIHJlbmRlcmVyIH0sIGNvbnRhaW5lclNlbGVjdG9yKSB7XG4gICAgdGhpcy5fcmVuZGVyZWRJdGVtcyA9IGl0ZW1zO1xuICAgIHRoaXMuX3JlbmRlcmVyID0gcmVuZGVyZXI7XG4gICAgdGhpcy5fY29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihjb250YWluZXJTZWxlY3Rvcik7XG4gIH1cblxuICByZW5kZXJJdGVtcygpIHtcbiAgICB0aGlzLl9yZW5kZXJlZEl0ZW1zLmZvckVhY2goKGl0ZW0pID0+IHtcbiAgICAgIHRoaXMuX3JlbmRlcmVyKGl0ZW0pO1xuICAgIH0pO1xuICB9XG5cbiAgYWRkSXRlbShlbGVtZW50KSB7XG4gICAgdGhpcy5fY29udGFpbmVyLmFwcGVuZChlbGVtZW50KTtcbiAgfVxuXG4gIHByZXBlbmRJdGVtKGVsZW1lbnQpIHtcbiAgICB0aGlzLl9jb250YWluZXIucHJlcGVuZChlbGVtZW50KTtcbiAgfVxufVxuIl0sIm5hbWVzIjpbIlBvcHVwIiwiY29uc3RydWN0b3IiLCJfcmVmIiwicG9wdXBTZWxlY3RvciIsInRoaXMiLCJfcG9wdXBFbGVtZW50IiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiX2hhbmRsZUVzY0Nsb3NlIiwiYmluZCIsIl9oYW5kbGVDbGlja0Nsb3NlIiwib3BlbiIsImNsYXNzTGlzdCIsImFkZCIsInNldEV2ZW50TGlzdGVuZXJzIiwiY2xvc2UiLCJyZW1vdmUiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiZXZ0Iiwia2V5IiwidGFyZ2V0IiwiY29udGFpbnMiLCJhZGRFdmVudExpc3RlbmVyIiwiUG9wdXBXaXRoRm9ybSIsImhhbmRsZUZvcm1TdWJtaXQiLCJzdXBlciIsIl9wb3B1cEZvcm0iLCJfaGFuZGxlRm9ybVN1Ym1pdCIsIl9pbnB1dHMiLCJxdWVyeVNlbGVjdG9yQWxsIiwiX2dldElucHV0VmFsdWVzIiwiaW5wdXRzT2JqIiwiZm9yRWFjaCIsImlucHV0IiwibmFtZSIsInZhbHVlIiwiX3N1Ym1pdEZvcm0iLCJpbnB1dFZhbHVlcyIsInJlc2V0IiwicHJvZmlsZUVkaXRCdXR0b24iLCJpbnB1dE5hbWUiLCJpbnB1dERlc2NyaXB0aW9uIiwiY2FyZEFkZEJ1dHRvbiIsImZvcm1WYWxpZGF0b3JzIiwiY29uZmlnIiwiZm9ybVNlbGVjdG9yIiwiaW5wdXRTZWxlY3RvciIsInN1Ym1pdEJ1dHRvblNlbGVjdG9yIiwiaW5hY3RpdmVCdXR0b25DbGFzcyIsImlucHV0RXJyb3JDbGFzcyIsImVycm9yQ2xhc3MiLCJBcnJheSIsImZyb20iLCJmb3JtRWxlbWVudCIsInZhbGlkYXRvciIsIl9pbnB1dFNlbGVjdG9yIiwiX3N1Ym1pdEJ1dHRvblNlbGVjdG9yIiwiX2luYWN0aXZlQnV0dG9uQ2xhc3MiLCJfaW5wdXRFcnJvckNsYXNzIiwiX2Vycm9yQ2xhc3MiLCJfZm9ybSIsIl9zaG93SW5wdXRFcnJvciIsImlucHV0RWxlbWVudCIsImVycm9yTWVzc2FnZUVsZW0iLCJpZCIsInRleHRDb250ZW50IiwidmFsaWRhdGlvbk1lc3NhZ2UiLCJfaGlkZUlucHV0RXJyb3IiLCJyZXNldFZhbGlkYXRpb24iLCJfdG9nZ2xlQnV0dG9uU3RhdGUiLCJfaW5wdXRFbGVtZW50cyIsIl9oYXNJbnZhbGlkSW5wdXQiLCJfZGlzYWJsZUJ1dHRvbiIsIl9idXR0b25FbGVtZW50IiwiZGlzYWJsZWQiLCJzb21lIiwidmFsaWRpdHkiLCJ2YWxpZCIsIl9jaGVja0lucHV0VmFsaWRpdHkiLCJfc2V0RXZlbnRMaXN0ZW5lcnMiLCJlbmFibGVWYWxpZGF0aW9uIiwicHJldmVudERlZmF1bHQiLCJmb3JtTmFtZSIsImdldEF0dHJpYnV0ZSIsImltYWdlUHJldmlld1BvcHVwIiwiX3ByZXZpZXdJbWFnZSIsIl9wcmV2aWV3Q2FwdGlvbiIsImxpbmsiLCJzcmMiLCJhbHQiLCJhZGRDYXJkUG9wdXAiLCJjYXJkRWxlbWVudCIsInJlbmRlckNhcmQiLCJjYXJkU2VjdGlvbiIsInByZXBlbmRJdGVtIiwiZWRpdFByb2ZpbGVQb3B1cCIsImZvcm1EYXRhIiwiZGVzY3JpcHRpb24iLCJ1c2VySW5mbyIsInNldFVzZXJJbmZvIiwiX25hbWVFbGVtZW50IiwiX2Rlc2NyaXBFbGVtZW50IiwiZ2V0VXNlckluZm8iLCJwcm9maWxlT2JqZWN0IiwiaGFuZGxlQ2FyZENsaWNrIiwiY2FyZERhdGEiLCJjYXJkU2VsZWN0b3IiLCJfbmFtZSIsIl9saW5rIiwiX2NhcmRTZWxlY3RvciIsIl9oYW5kbGVDYXJkQ2xpY2siLCJfY2FyZEltYWdlIiwiX2xpa2VCdXR0b24iLCJfaGFuZGxlTGlrZUJ1dHRvbiIsIl9kZWxldGVCdXR0b24iLCJfaGFuZGxlRGVsZXRlQnV0dG9uIiwidG9nZ2xlIiwiX2NhcmRFbGVtZW50IiwiX2dldFRlbXBsYXRlIiwiY29udGVudCIsImNsb25lTm9kZSIsImdldFZpZXciLCJfY2FyZFRpdGxlIiwiY29udGFpbmVyU2VsZWN0b3IiLCJpdGVtcyIsInJlbmRlcmVyIiwiX3JlbmRlcmVkSXRlbXMiLCJfcmVuZGVyZXIiLCJfY29udGFpbmVyIiwicmVuZGVySXRlbXMiLCJpdGVtIiwiYWRkSXRlbSIsImVsZW1lbnQiLCJhcHBlbmQiLCJwcmVwZW5kIiwicHJvZmlsZU5hbWUiXSwic291cmNlUm9vdCI6IiJ9